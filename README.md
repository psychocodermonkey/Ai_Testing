# AI Testing playground

This is a simple project to test and experiment with different AI models. Includes a easy method to pull down pre-trained models from Hugging Face.

`.gitignore` is enforced in the `/models/` directory, so you can safely clone models without worrying about them being pushed back to github.

More to come as it gets developed!

## Ubiquitous.py - A Python Script with functions for simplifying model handling

### Overview

This file provides a set of Python functions designed to simplify and streamline various tasks related to machine learning model handling, particularly those involving Hugging Face repositories. The primary goal is to make it easier to download, manage, and utilize models from Hugging Face's vast library without the need for reinvention of the wheel.

### Key Functions in Ubiquitous.py

#### 1. `getModelDir()`

- **Purpose**: This function generates a directory where models will be stored. It also ensures that a `.gitignore` file is created within this directory to prevent unwanted files from being tracked by Git.
- **Usage**: Call `getModelDir()` to get the path to the model directory, which can then be used for downloading and storing models.

#### 2. `getOutputDir()`

- **Purpose**: This function generates a directory where output generated by scripts will be stored. Similar to `getModelDir()`, it ensures that a `.gitignore` file is created within this directory to maintain the locality of the data within it. This file will have the large model files and does not need to be synced to GitHub.
- **Usage**: Call `getOutputDir()` to get the path for saving script outputs, which can then be easily accessed for review or further processing.

#### 3. `getModel(repoID, fileName, override)`

- **Purpose**: This function downloads a model from Hugging Face if it does not already exist locally. It supports an optional parameter to force redownloading of the model even if it exists.
- **Usage**: Call `getModel(repoID, fileName, override)` with the repository ID and filename of the model you want to download. The function will return the path to the model or `None` if there's a problem.

#### 4. `hfLogin()`

- **Purpose**: This function logs in to Hugging Face using an API token stored in an environment file. It checks for the presence of the token and attempts to log in accordingly.
- **Usage**: Call `hfLogin()` to ensure that your Hugging Face credentials are available for use with model downloading functions.

#### 5. `loadPrompt(promptFile)`

- **Purpose**: This function parses a prompt file to extract sections such as the main prompt, exclusion prompts, refine prompts, and exclude refines.
- **Usage**: Call `loadPrompt(promptFile)` with the path to your prompt file to get structured data for use in generating text or images based on specific instructions.

#### 6. `genPromptString(lines)`

- **Purpose**: This helper function converts a list of strings into a single string separated by commas, suitable for feeding directly into model inputs.
- **Usage**: Use this function within your script to convert lists of prompts or exclusions into the format expected by Hugging Face models.

### Basic Usage Examples in genImage.py

#### Generating an Image from Text Prompt

The script `genImage.py` demonstrates how to generate an image based on a text prompt stored in a file. Hereâ€™s a basic example of how you can use it:

```bash
python genImage.py path/to/promptFile.prompt
```

This command will read the specified prompt file and generate an image using the Stable Diffusion model, saving the output to the default output directory with a timestamped filename.

### Advanced Usage with Refinement Options

If `[refine prompt]` exists in the provided prompt file, the program will utilize a secondary model for taking the prodecd image and further refining it with the prompts provided under `[refine prompt]` and `[refine exclude]`. If `[refine exclude]` is not present, the excluded from the primary prompt will be substituted if present. This can yield better results than the text to image model alone.

```prompt
[prompt]
A anthropomorphic cyberpunk gorilla wearing a leather hooded bomber jacket,
judgy expression,
sitting and using a futuristic computer,
chunky mechanicak keyboard,
multiple computer displays,
programming code on the displays,
high-detailed cyberpunk workstation setting.

[exclude]
human-like facial features
realistic skin texture
ears, nose, mouth, eyebrows
; emotional expressions
hair or fur patterns that do not contribute to the cyberpunk aesthetic

[refine prompt]
judgy expression
code on screens
orange accents on clothing
orange accents on computer
neon orange streaks in fur
high-detail fur, clothing, and computers
code on displays
```
